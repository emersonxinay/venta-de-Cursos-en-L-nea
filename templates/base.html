<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Título dinámico -->
    <title>{% block title %}Cursos Online - CompilandoCode{% endblock %}</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="{% block description %}Aprende programación y tecnología con nuestros cursos online profesionales.{% endblock %}" />
    <meta name="keywords" content="{% block keywords %}cursos online, programación, Python, Flask, React, tecnología, desarrollo web{% endblock %}" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="{% block og_title %}{{ self.title() }}{% endblock %}" />
    <meta property="og:description" content="{% block og_description %}{{ self.description() }}{% endblock %}" />
    <meta property="og:image" content="{% block og_image %}{{ url_for('static', filename='img/og-image.jpg', _external=True) }}{% endblock %}" />
    <meta property="og:url" content="{% block og_url %}{{ request.url }}{% endblock %}" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="{% block twitter_title %}{{ self.og_title() }}{% endblock %}" />
    <meta name="twitter:description" content="{% block twitter_description %}{{ self.og_description() }}{% endblock %}" />
    <meta name="twitter:image" content="{% block twitter_image %}{{ self.og_image() }}{% endblock %}" />
    
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='img/apple-touch-icon.png') }}" />
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='img/favicon-32x32.png') }}" />
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='img/favicon-16x16.png') }}" />
    <link rel="manifest" href="{{ url_for('static', filename='img/site.webmanifest') }}" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                50: '#eff6ff',
                500: '#3b82f6',
                600: '#2563eb',
                700: '#1d4ed8'
              },
              secondary: {
                500: '#8b5cf6',
                600: '#7c3aed'
              }
            }
          }
        }
      }
    </script>
    
    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    
    <!-- Estilos CSS Principal -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />
    
    <!-- Nuevo sistema de diseño mobile-first con degradados -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modern-ui.css') }}" />
    
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <!-- Scripts externos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js" defer></script>
    <script src="https://unpkg.com/alpinejs@3.13.0/dist/cdn.min.js" defer></script>
    
    <!-- Estilos específicos de página -->
    {% block extra_css %}{% endblock %}
  </head>

  <body class="antialiased">
    <!-- Loader inicial -->
    <div id="page-loader" class="fixed inset-0 bg-white z-50 flex items-center justify-center transition-opacity duration-500">
      <div class="spinner"></div>
    </div>
    
    <!-- Navegación -->
    {% include "shared/navbar.html" %}
    
    <!-- Notificaciones Flash -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div id="flash-messages" class="fixed top-20 right-4 z-40 space-y-2">
          {% for category, message in messages %}
            <div class="alert alert-{{ 'error' if category == 'error' else 'success' if category == 'success' else 'info' }} transform translate-x-full transition-transform duration-300 ease-out" 
                 x-data="{ show: false }" 
                 x-init="setTimeout(() => show = true, 100); setTimeout(() => show = false, 5000)" 
                 x-show="show" 
                 x-transition:enter="transform transition ease-out duration-300" 
                 x-transition:enter-start="translate-x-full" 
                 x-transition:enter-end="translate-x-0" 
                 x-transition:leave="transform transition ease-in duration-200" 
                 x-transition:leave-start="translate-x-0" 
                 x-transition:leave-end="translate-x-full">
              <div class="flex items-start gap-3">
                <div class="flex-shrink-0">
                  {% if category == 'success' %}
                    <svg class="w-3.5 h-3.5 text-success-600" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
          </svg>
                  {% elif category == 'error' %}
                    <svg class="w-3.5 h-3.5 text-error-600" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
          </svg>
                  {% else %}
                    <svg class="w-3.5 h-3.5 text-primary-600" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
          </svg>
                  {% endif %}
                </div>
                <div class="flex-1">
                  <p class="text-sm font-medium">{{ message }}</p>
                </div>
                <button @click="show = false" class="flex-shrink-0 ml-4">
                  <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                  </svg>
                </button>
              </div>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    
    <!-- Contenido principal -->
    <main class="min-h-screen">
      {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    {% include "shared/footer.html" %}
    
    <!-- CSRF Token -->
    <meta name="csrf-token" content="{{ csrf_token() }}" />
    
    <!-- Scripts -->
    <script>
      // Ocultar loader cuando la página esté cargada
      window.addEventListener('load', () => {
        const loader = document.getElementById('page-loader');
        if (loader) {
          loader.style.opacity = '0';
          setTimeout(() => loader.remove(), 500);
        }
      });
      
      // Configuración global
      window.App = {
        csrfToken: document.querySelector('meta[name="csrf-token"]')?.getAttribute('content'),
        baseUrl: '{{ request.url_root }}'
      };
    </script>
    
    <!-- Scripts específicos de página -->
    {% block extra_js %}{% endblock %}
  </body>
</html>
